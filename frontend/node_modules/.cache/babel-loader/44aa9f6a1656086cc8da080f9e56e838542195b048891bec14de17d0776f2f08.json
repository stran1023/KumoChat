{"ast":null,"code":"var _jsxFileName = \"D:\\\\Chuyen nganh\\\\\\u0110\\u1ED3 \\xE1n ATTT\\\\KumoChat\\\\frontend\\\\src\\\\components\\\\auth\\\\RegisterForm.jsx\",\n  _s = $RefreshSig$();\nimport { useState } from \"react\";\nimport { TextField, Button, Box, Typography } from \"@mui/material\";\nimport axios from \"axios\";\nimport { generateRSAKeyPair } from \"../../utils/crypto\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function RegisterForm() {\n  _s();\n  const [form, setForm] = useState({\n    username: \"\",\n    email: \"\",\n    password: \"\",\n    publicKey: \"\",\n    encryptedPrivateKey: \"\"\n  });\n  const [keysGenerated, setKeysGenerated] = useState(false);\n  const handleChange = e => {\n    setForm(prev => ({\n      ...prev,\n      [e.target.name]: e.target.value\n    }));\n  };\n  const handleGenerateKeys = async () => {\n    if (!form.password) {\n      alert(\"‚ùó B·∫°n c·∫ßn nh·∫≠p m·∫≠t kh·∫©u tr∆∞·ªõc khi t·∫°o key\");\n      return;\n    }\n    const {\n      publicKey,\n      encryptedPrivateKey\n    } = await generateRSAKeyPair(form.password);\n    setForm(prev => ({\n      ...prev,\n      publicKey,\n      encryptedPrivateKey\n    }));\n    setKeysGenerated(true);\n    alert(\"‚úÖ ƒê√£ t·∫°o RSA keypair!\");\n  };\n  const handleRegister = async () => {\n    if (!form.publicKey || !form.encryptedPrivateKey) {\n      alert(\"‚ö†Ô∏è B·∫°n c·∫ßn t·∫°o RSA keypair tr∆∞·ªõc khi ƒëƒÉng k√Ω\");\n      return;\n    }\n    try {\n      await axios.post(`${process.env.REACT_APP_API_URL}/auth/register`, form);\n      alert(\"üéâ ƒêƒÉng k√Ω th√†nh c√¥ng! Ch·ªù admin duy·ªát nha.\");\n    } catch (err) {\n      console.error(err);\n      alert(\"‚ùå ƒêƒÉng k√Ω th·∫•t b·∫°i!\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      maxWidth: 500,\n      mx: \"auto\",\n      mt: 8\n    },\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h5\",\n      gutterBottom: true,\n      children: \"\\u0110\\u0103ng k\\xFD t\\xE0i kho\\u1EA3n\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TextField, {\n      label: \"Username\",\n      name: \"username\",\n      fullWidth: true,\n      margin: \"normal\",\n      value: form.username,\n      onChange: handleChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TextField, {\n      label: \"Email\",\n      name: \"email\",\n      fullWidth: true,\n      margin: \"normal\",\n      value: form.email,\n      onChange: handleChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TextField, {\n      label: \"M\\u1EADt kh\\u1EA9u\",\n      name: \"password\",\n      type: \"password\",\n      fullWidth: true,\n      margin: \"normal\",\n      value: form.password,\n      onChange: handleChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      variant: \"outlined\",\n      fullWidth: true,\n      sx: {\n        mt: 2\n      },\n      onClick: handleGenerateKeys,\n      children: \"\\uD83D\\uDD10 T\\u1EF1 \\u0111\\u1ED9ng t\\u1EA1o RSA Keypair\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      variant: \"contained\",\n      fullWidth: true,\n      sx: {\n        mt: 2\n      },\n      onClick: handleRegister,\n      disabled: !keysGenerated,\n      children: \"\\uD83D\\uDCDD \\u0110\\u0103ng k\\xFD\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this), keysGenerated && /*#__PURE__*/_jsxDEV(Box, {\n      mt: 3,\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"subtitle2\",\n        children: \"\\uD83D\\uDD11 Public Key (\\u1EA9n):\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        sx: {\n          fontSize: 12,\n          whiteSpace: \"pre-wrap\",\n          maxHeight: 120,\n          overflow: \"auto\",\n          bgcolor: \"#f9f9f9\",\n          p: 1\n        },\n        children: form.publicKey\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 5\n  }, this);\n}\n_s(RegisterForm, \"EkxQjCPhUzm8KhSBEZ0PHSWR+qI=\");\n_c = RegisterForm;\nvar _c;\n$RefreshReg$(_c, \"RegisterForm\");","map":{"version":3,"names":["useState","TextField","Button","Box","Typography","axios","generateRSAKeyPair","jsxDEV","_jsxDEV","RegisterForm","_s","form","setForm","username","email","password","publicKey","encryptedPrivateKey","keysGenerated","setKeysGenerated","handleChange","e","prev","target","name","value","handleGenerateKeys","alert","handleRegister","post","process","env","REACT_APP_API_URL","err","console","error","sx","maxWidth","mx","mt","children","variant","gutterBottom","fileName","_jsxFileName","lineNumber","columnNumber","label","fullWidth","margin","onChange","type","onClick","disabled","fontSize","whiteSpace","maxHeight","overflow","bgcolor","p","_c","$RefreshReg$"],"sources":["D:/Chuyen nganh/ƒê·ªì √°n ATTT/KumoChat/frontend/src/components/auth/RegisterForm.jsx"],"sourcesContent":["import { useState } from \"react\";\r\nimport { TextField, Button, Box, Typography } from \"@mui/material\";\r\nimport axios from \"axios\";\r\nimport { generateRSAKeyPair } from \"../../utils/crypto\";\r\n\r\nexport default function RegisterForm() {\r\n  const [form, setForm] = useState({\r\n    username: \"\",\r\n    email: \"\",\r\n    password: \"\",\r\n    publicKey: \"\",\r\n    encryptedPrivateKey: \"\",\r\n  });\r\n\r\n  const [keysGenerated, setKeysGenerated] = useState(false);\r\n\r\n  const handleChange = (e) => {\r\n    setForm((prev) => ({\r\n      ...prev,\r\n      [e.target.name]: e.target.value,\r\n    }));\r\n  };\r\n\r\n  const handleGenerateKeys = async () => {\r\n    if (!form.password) {\r\n      alert(\"‚ùó B·∫°n c·∫ßn nh·∫≠p m·∫≠t kh·∫©u tr∆∞·ªõc khi t·∫°o key\");\r\n      return;\r\n    }\r\n\r\n    const { publicKey, encryptedPrivateKey } = await generateRSAKeyPair(form.password);\r\n    setForm((prev) => ({\r\n      ...prev,\r\n      publicKey,\r\n      encryptedPrivateKey,\r\n    }));\r\n    setKeysGenerated(true);\r\n    alert(\"‚úÖ ƒê√£ t·∫°o RSA keypair!\");\r\n  };\r\n\r\n  const handleRegister = async () => {\r\n    if (!form.publicKey || !form.encryptedPrivateKey) {\r\n      alert(\"‚ö†Ô∏è B·∫°n c·∫ßn t·∫°o RSA keypair tr∆∞·ªõc khi ƒëƒÉng k√Ω\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await axios.post(`${process.env.REACT_APP_API_URL}/auth/register`, form);\r\n      alert(\"üéâ ƒêƒÉng k√Ω th√†nh c√¥ng! Ch·ªù admin duy·ªát nha.\");\r\n    } catch (err) {\r\n      console.error(err);\r\n      alert(\"‚ùå ƒêƒÉng k√Ω th·∫•t b·∫°i!\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Box sx={{ maxWidth: 500, mx: \"auto\", mt: 8 }}>\r\n      <Typography variant=\"h5\" gutterBottom>ƒêƒÉng k√Ω t√†i kho·∫£n</Typography>\r\n\r\n      <TextField\r\n        label=\"Username\"\r\n        name=\"username\"\r\n        fullWidth margin=\"normal\"\r\n        value={form.username}\r\n        onChange={handleChange}\r\n      />\r\n      <TextField\r\n        label=\"Email\"\r\n        name=\"email\"\r\n        fullWidth margin=\"normal\"\r\n        value={form.email}\r\n        onChange={handleChange}\r\n      />\r\n      <TextField\r\n        label=\"M·∫≠t kh·∫©u\"\r\n        name=\"password\"\r\n        type=\"password\"\r\n        fullWidth margin=\"normal\"\r\n        value={form.password}\r\n        onChange={handleChange}\r\n      />\r\n\r\n      <Button\r\n        variant=\"outlined\"\r\n        fullWidth\r\n        sx={{ mt: 2 }}\r\n        onClick={handleGenerateKeys}\r\n      >\r\n        üîê T·ª± ƒë·ªông t·∫°o RSA Keypair\r\n      </Button>\r\n\r\n      <Button\r\n        variant=\"contained\"\r\n        fullWidth\r\n        sx={{ mt: 2 }}\r\n        onClick={handleRegister}\r\n        disabled={!keysGenerated}\r\n      >\r\n        üìù ƒêƒÉng k√Ω\r\n      </Button>\r\n\r\n      {keysGenerated && (\r\n        <Box mt={3}>\r\n          <Typography variant=\"subtitle2\">üîë Public Key (·∫©n):</Typography>\r\n          <Typography sx={{ fontSize: 12, whiteSpace: \"pre-wrap\", maxHeight: 120, overflow: \"auto\", bgcolor: \"#f9f9f9\", p: 1 }}>\r\n            {form.publicKey}\r\n          </Typography>\r\n        </Box>\r\n      )}\r\n    </Box>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}